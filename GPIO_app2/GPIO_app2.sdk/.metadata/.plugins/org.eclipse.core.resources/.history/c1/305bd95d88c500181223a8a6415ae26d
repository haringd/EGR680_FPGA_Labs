/*
 * GPIO_game.c
 *
 *  Created on: 01.10.2018
 *      Author: schwa
 */

#include "xparameters.h"
#include "xgpio.h"
#include "xtime_l.h"

int main (void)
{
	XGpio dip, push;
	int psb_check, dip_check, state, door;

	xil_printf("-- Start of the Program Let's Make a Deal -- \r\n");
	XGpio_Initialize(&dip, XPAR_SWITCHES_DEVICE_ID);
	XGpio_SetDataDirection(&dip, 1, 0xffffffff);

	XGpio_Initialize(&push, XPAR_BUTTONS_DEVICE_ID);
	XGpio_SetDataDirection(&push, 1, 0xffffffff);

	state = 0; // set default state

	while(1)
	{

		psb_check = XGpio_DiscreteRead(&push, 1);
		xil_printf("Push Buttons Status %x\r\n", psb_check);
		dip_check = XGpio_DiscreteRead(&dip, 1);
		xil_printf("DIP Switch Status %x\r\n", dip_check);
		switch (state) {
		case 0:// Idle state
			xil_printf("***********************************\r\n");
			xil_printf("---Welcome to Let's Make a Deal!---\r\n");
			xil_printf("***********************************\r\n");
			xil_printf("Select between 1 and 5 to seed the Random Number Generator: ");
			state = 1;
			break;
		case 1:

			break;
		case 4:
			break;
		case 8:
			break;
		default:
			break;
		}

		switch (psb_check) {
		case 1:
			door = 1;
			break;
		case 2:
			door = 2;
			break;
		case 4:
			door = 3;
			break;
		case 8:
			door = 4;
			break;
		default:
			door = 0;
			break;
		}

		sleep(1);

	} // end while(1)
} // end main

